import{c as B,j as e,q as L,B as k,r as b}from"./index-CyLddbD6.js";import{a as V,C as M}from"./config-drawer-D0Lvmk0a.js";import{H as F,S as E}from"./search-CdXJDppT.js";import{M as U}from"./main-CnnvO0gv.js";import{P as O}from"./profile-dropdown-BfnLNWIf.js";import{T as J}from"./theme-switch-BR8ZSlRP.js";import{C as c,d as o,a as p,b as j,c as T}from"./card-BTqXV1RT.js";import{T as R}from"./target-Df4kaJb8.js";import{C as $}from"./clock-CXMngBxy.js";import{Z as q,F as W,G as Q,H as X,I as z,J as G,C as K,B as Y,X as Z}from"./confirm-dialog-pAXck9NV.js";import{T as _,U as ee}from"./user-B8uGKb8w.js";import{ah as P,am as se,an as te,ao as A,al as I,ap as ae,ai as re,aj as ie,ak as ne,aq as le}from"./PieChart-DMLmWkbi.js";import{B as v}from"./badge-DHUMdwZJ.js";import{A as de,a as ce,b as oe}from"./sign-out-dialog-I2FQ1cpp.js";import{C as xe,a as me}from"./copy-Boo7_hGK.js";import{C as ue,S as w,a as S,b as D,c as C,d as g}from"./select-TQwDUQ4A.js";import{I as he}from"./input-CXl4TFaQ.js";import"./index-BbeBjg-j.js";import"./index-De73T7We.js";import"./index-BkYwP1Fm.js";import"./index-C626fjWP.js";import"./index-iG58nOgD.js";import"./index-DhnNAsvm.js";import"./index-CPEMSmfu.js";import"./separator-CrVCV9Cl.js";import"./check-BxIkDk5N.js";import"./index-d5d2tWRm.js";import"./index-XYn7pLoo.js";const ge=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],pe=B("link",ge);function je({stats:s}){return e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(c,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:s.totalTasks}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Across all sprints"})]}),e.jsx(R,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})]})})}),e.jsx(c,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:s.inProgressTasks}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Currently working"})]}),e.jsx($,{className:"h-8 w-8 text-amber-600 dark:text-amber-400"})]})})}),e.jsx(c,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:s.completedTasks}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Done: ",s.completionRate,"%"]})]}),e.jsx(V,{className:"h-8 w-8 text-green-600 dark:text-green-400"})]})})}),e.jsx(c,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"High Priority"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:s.highPriorityTasks}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Critical & High"})]}),e.jsx(q,{className:"h-8 w-8 text-red-600 dark:text-red-400"})]})})}),e.jsx(c,{className:"sm:col-span-2 lg:col-span-2",children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Blocked Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:s.blockedTasks}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Waiting for resolution"})]}),e.jsx(L,{className:"h-8 w-8 text-orange-600 dark:text-orange-400"})]})})}),e.jsx(c,{className:"sm:col-span-2 lg:col-span-2",children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Overdue Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-destructive",children:s.overdueTasks}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Past due date"})]}),e.jsx(_,{className:"h-8 w-8 text-destructive"})]})})})]})}function fe({tasks:s}){const d=[{name:"To Do",value:s.filter(t=>t.status==="To Do").length},{name:"In Progress",value:s.filter(t=>t.status==="In Progress").length},{name:"In Review",value:s.filter(t=>t.status==="In Review").length},{name:"Done",value:s.filter(t=>t.status==="Done").length},{name:"Blocked",value:s.filter(t=>t.status==="Blocked").length}].filter(t=>t.value>0),i=[{name:"Critical",value:s.filter(t=>t.priority==="Critical").length},{name:"High",value:s.filter(t=>t.priority==="High").length},{name:"Medium",value:s.filter(t=>t.priority==="Medium").length},{name:"Low",value:s.filter(t=>t.priority==="Low").length}].filter(t=>t.value>0),x={Todo:"#ef4444","In Progress":"#f59e0b","In Review":"#8b5cf6",Done:"#10b981",Blocked:"#ef4444"},u={Critical:"#dc2626",High:"#f97316",Medium:"#eab308",Low:"#22c55e"};return e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(c,{children:[e.jsxs(p,{children:[e.jsx(j,{children:"Task Status Breakdown"}),e.jsx(T,{children:"Current distribution across all statuses"})]}),e.jsx(o,{children:d.length>0?e.jsx(P,{width:"100%",height:300,children:e.jsxs(se,{children:[e.jsx(te,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,value:n})=>`${t}: ${n}`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:d.map((t,n)=>e.jsx(A,{fill:x[t.name]||"#8884d8"},`cell-${n}`))}),e.jsx(I,{})]})}):e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No task data available"})})]}),e.jsxs(c,{children:[e.jsxs(p,{children:[e.jsx(j,{children:"Priority Distribution"}),e.jsx(T,{children:"Tasks by priority level"})]}),e.jsx(o,{children:i.length>0?e.jsx(P,{width:"100%",height:300,children:e.jsxs(ae,{data:i,children:[e.jsx(re,{strokeDasharray:"3 3",stroke:"currentColor",opacity:.1}),e.jsx(ie,{dataKey:"name"}),e.jsx(ne,{}),e.jsx(I,{contentStyle:{backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"0.5rem"}}),e.jsx(le,{dataKey:"value",fill:"#3b82f6",radius:[8,8,0,0],children:i.map((t,n)=>e.jsx(A,{fill:u[t.name]||"#3b82f6"},`cell-${n}`))})]})}):e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No priority data available"})})]})]})}function ye({task:s,open:d,onOpenChange:i}){if(!s)return null;const x=t=>{switch(t){case"Critical":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"High":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"Medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"Low":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},u=t=>{switch(t){case"Done":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"To Do":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200";case"Blocked":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800"}};return e.jsx(W,{open:d,onOpenChange:i,children:e.jsxs(Q,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(X,{children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(z,{className:"text-xl",children:s.title}),e.jsxs(G,{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[s.key," • Sprint ",s.sprint," • ",s.type]})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{className:u(s.status),children:s.status}),e.jsxs(v,{className:x(s.priority),children:["Priority: ",s.priority]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-2",children:[e.jsxs(c,{children:[e.jsx(p,{className:"pb-3",children:e.jsxs(j,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Assignee"]})}),e.jsx(o,{children:e.jsx("p",{className:"font-medium",children:s.assignee||"Unassigned"})})]}),e.jsxs(c,{children:[e.jsx(p,{className:"pb-3",children:e.jsxs(j,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Story Points"]})}),e.jsx(o,{children:e.jsx("p",{className:"font-medium",children:s.storyPoints||"-"})})]}),e.jsxs(c,{children:[e.jsx(p,{className:"pb-3",children:e.jsxs(j,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"Due Date"]})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm",children:s.dueDate||"No due date"})})]}),e.jsxs(c,{children:[e.jsx(p,{className:"pb-3",children:e.jsx(j,{className:"text-sm font-medium",children:"Sprint"})}),e.jsx(o,{children:e.jsx("p",{className:"font-medium",children:s.sprint})})]})]}),e.jsxs(c,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-sm",children:"Description"})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:s.description||"No description provided"})})]}),s.linkedVulnerability&&e.jsxs(c,{className:"border-blue-200 dark:border-blue-900",children:[e.jsx(p,{children:e.jsxs(j,{className:"text-sm flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Linked Vulnerability"]})}),e.jsx(o,{className:"space-y-3",children:e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 p-3 rounded",children:[e.jsx("p",{className:"font-medium text-sm text-blue-900 dark:text-blue-100",children:s.linkedVulnerability.name}),e.jsx(v,{className:"mt-2 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:s.linkedVulnerability.severity})]})})]}),s.linkedVulnerability&&s.instances&&s.instances.length>0&&e.jsxs(c,{children:[e.jsxs(p,{children:[e.jsxs(j,{className:"text-sm",children:["Vulnerability Instances (",s.instances.length,")"]}),e.jsx(T,{children:"Exact locations where the vulnerability was found"})]}),e.jsx(o,{children:e.jsx("div",{className:"space-y-3",children:s.instances.map((t,n)=>e.jsxs("div",{className:"p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-900 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t.location}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Line ",t.lineNumber]})]}),e.jsx(k,{size:"sm",variant:"ghost",onClick:()=>{navigator.clipboard.writeText(t.location)},children:e.jsx(me,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"bg-black text-green-400 p-2 rounded text-xs font-mono overflow-x-auto max-h-24 overflow-y-auto",children:e.jsx("pre",{children:t.codeSnippet})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"File: "}),e.jsx("span",{className:"font-medium",children:t.file})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type: "}),e.jsx("span",{className:"font-medium",children:t.type})]})]})]},n))})})]}),e.jsxs(c,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-sm",children:"Activity"})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mt-1.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Task created"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"2 days ago"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-1.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Assigned to ",s.assignee]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"1 day ago"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Moved to ",s.status]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Just now"})]})]})]})})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(k,{className:"flex-1",children:"Edit Task"}),e.jsx(k,{variant:"outline",className:"flex-1",children:"Open in Jira"})]})]})]})})}function be({sprints:s,tasks:d}){const[i,x]=b.useState(new Set(["sprint-1"])),[u,t]=b.useState(null),n=r=>{const a=new Set(i);a.has(r)?a.delete(r):a.add(r),x(a)},f=r=>{switch(r){case"Critical":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"High":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"Medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"Low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},m=r=>{switch(r){case"Todo":return"text-muted-foreground";case"In Progress":return"text-blue-600 dark:text-blue-400";case"In Review":return"text-purple-600 dark:text-purple-400";case"Done":return"text-green-600 dark:text-green-400";case"Blocked":return"text-red-600 dark:text-red-400";default:return"text-muted-foreground"}},N=r=>r==="Done"?e.jsx(V,{className:"h-4 w-4"}):r==="Blocked"?e.jsx(L,{className:"h-4 w-4"}):null,l=r=>d.filter(a=>a.sprint===r).length,h=r=>d.filter(a=>a.sprint===r&&a.status==="Done").length;return e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsx(p,{children:e.jsx(j,{children:"Backlog & Sprints"})}),e.jsx(o,{className:"space-y-4",children:s.map(r=>e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>n(r.id),className:"w-full bg-muted/30 hover:bg-muted/50 dark:hover:bg-muted/40 transition-colors px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[i.has(r.id)?e.jsx(ue,{className:"h-4 w-4"}):e.jsx(K,{className:"h-4 w-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-foreground",children:r.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h(r.id)," of ",l(r.id)," completed"]})]})]}),e.jsx(v,{variant:"secondary",className:`capitalize ${r.state==="active"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":r.state==="closed"?"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"}`,children:r.state})]}),i.has(r.id)&&e.jsx("div",{className:"p-4 space-y-2 bg-card",children:d.filter(a=>a.sprint===r.id).map(a=>e.jsxs("div",{onClick:()=>t(a),className:"p-3 rounded-lg border border-border hover:bg-muted/50 dark:hover:bg-muted/30 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-mono text-muted-foreground font-semibold",children:a.key}),e.jsx(v,{variant:"secondary",className:`text-xs ${f(a.priority)}`,children:a.priority})]}),e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:a.title})]}),N(a.status)&&e.jsx("div",{className:m(a.status),children:N(a.status)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[e.jsx("span",{className:`px-2 py-1 rounded-full font-semibold ${a.status==="Done"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":a.status==="In Progress"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":a.status==="In Review"?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":a.status==="Blocked"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}`,children:a.status}),a.assignee&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(de,{className:"h-5 w-5",children:[e.jsx(ce,{src:a.assigneeAvatar,alt:a.assignee}),e.jsx(oe,{className:"text-xs",children:a.assignee.split(" ").map(H=>H[0]).join("")})]}),e.jsx("span",{children:a.assignee})]}),a.storyPoints&&e.jsxs("span",{className:"font-semibold",children:[a.storyPoints," pts"]}),a.dueDate&&e.jsxs("span",{children:["Due: ",new Date(a.dueDate).toLocaleDateString()]}),a.linkedVulnerability&&e.jsx(v,{variant:"outline",className:"text-xs",children:a.linkedVulnerability.id||a.linkedVulnerability.name})]})]},a.id))})]},r.id))})]}),u&&e.jsx(ye,{task:u,open:!!u,onOpenChange:r=>{r||t(null)}})]})}function ve({onFiltersChange:s,assignees:d=[]}){const[i,x]=b.useState({searchTerm:""}),u=l=>{const h={...i,searchTerm:l};x(h),s(h)},t=l=>{const h={...i,status:l==="all"?void 0:l};x(h),s(h)},n=l=>{const h={...i,priority:l==="all"?void 0:l};x(h),s(h)},f=l=>{const h={...i,assignee:l==="all"?void 0:l};x(h),s(h)},m=i.searchTerm||i.status||i.priority||i.assignee,N=()=>{const l={searchTerm:""};x(l),s(l)};return e.jsx(c,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(he,{placeholder:"Search tasks by title or ID...",value:i.searchTerm,onChange:l=>u(l.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground block mb-1",children:"Status"}),e.jsxs(w,{value:i.status||"all",onValueChange:t,children:[e.jsx(S,{className:"h-9",children:e.jsx(D,{})}),e.jsxs(C,{children:[e.jsx(g,{value:"all",children:"All Statuses"}),e.jsx(g,{value:"Todo",children:"Todo"}),e.jsx(g,{value:"In Progress",children:"In Progress"}),e.jsx(g,{value:"In Review",children:"In Review"}),e.jsx(g,{value:"Done",children:"Done"}),e.jsx(g,{value:"Blocked",children:"Blocked"})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground block mb-1",children:"Priority"}),e.jsxs(w,{value:i.priority||"all",onValueChange:n,children:[e.jsx(S,{className:"h-9",children:e.jsx(D,{})}),e.jsxs(C,{children:[e.jsx(g,{value:"all",children:"All Priorities"}),e.jsx(g,{value:"Critical",children:"Critical"}),e.jsx(g,{value:"High",children:"High"}),e.jsx(g,{value:"Medium",children:"Medium"}),e.jsx(g,{value:"Low",children:"Low"})]})]})]}),d.length>0&&e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground block mb-1",children:"Assignee"}),e.jsxs(w,{value:i.assignee||"all",onValueChange:f,children:[e.jsx(S,{className:"h-9",children:e.jsx(D,{})}),e.jsxs(C,{children:[e.jsx(g,{value:"all",children:"All Assignees"}),d.map(l=>e.jsx(g,{value:l,children:l},l))]})]})]}),m&&e.jsxs(k,{variant:"outline",size:"sm",onClick:N,className:"h-9 w-full sm:w-auto",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),"Clear"]})]})]})})})}const Ne=[{id:"sprint-1",name:"Sprint 1 - Security Audit",state:"active",startDate:"2025-01-13",endDate:"2025-01-27",goal:"Complete security audit and vulnerability assessment"},{id:"sprint-2",name:"Sprint 2 - Remediation",state:"future",startDate:"2025-01-27",endDate:"2025-02-10",goal:"Remediate critical vulnerabilities"}],y=[{id:"task-1",key:"PROJ-101",title:"Scan prod-api-01 with Snyk SCA",description:"Run Snyk SCA scan on production API server",priority:"Critical",status:"In Progress",assignee:"John Doe",assigneeAvatar:"/avatars/shadcn.jpg",storyPoints:5,dueDate:"2025-01-20",sprint:"sprint-1",linkedVulnerability:{id:"VULN-001",name:"Vulnerable Dependency: express@4.17.1",severity:"High"},instances:[{location:"dependencies - package.json",file:"package.json",lineNumber:12,codeSnippet:'"express": "4.17.1"',type:"Outdated Dependency"}],type:"SCA Scan",createdDate:"2025-01-13",updatedDate:"2025-01-17"},{id:"task-2",key:"PROJ-102",title:"Fix SQL Injection in Login Form",description:"Address SQL injection vulnerability found in authentication module",priority:"Critical",status:"In Progress",assignee:"Jane Smith",assigneeAvatar:"/avatars/shadcn.jpg",storyPoints:8,dueDate:"2025-01-22",sprint:"sprint-1",linkedVulnerability:{id:"VULN-045",name:"SQL Injection in User Login",severity:"Critical"},instances:[{location:"src/auth.js - loginHandler()",file:"src/auth.js",lineNumber:34,codeSnippet:`const query = "SELECT * FROM users WHERE email='" + email + "'"`,type:"SQL Injection"},{location:"src/auth.js - registerUser()",file:"src/auth.js",lineNumber:67,codeSnippet:`const insertQuery = "INSERT INTO users VALUES ('" + username + "', ...)"`,type:"SQL Injection"}],type:"SAST Scan",createdDate:"2025-01-14",updatedDate:"2025-01-17"},{id:"task-3",key:"PROJ-103",title:"Implement XSS Protection on web-server-02",description:"Add XSS protection headers and input validation",priority:"High",status:"To Do",assignee:"Bob Wilson",assigneeAvatar:"/avatars/shadcn.jpg",storyPoints:5,dueDate:"2025-01-24",sprint:"sprint-1",linkedVulnerability:{id:"VULN-067",name:"Cross-Site Scripting (XSS) in Comments",severity:"High"},instances:[{location:"src/components/CommentForm.jsx - renderComment()",file:"src/components/CommentForm.jsx",lineNumber:42,codeSnippet:"return <div>{comment.text}</div>  // Unsafe: no HTML escaping",type:"Reflected XSS"}],type:"SAST Scan",createdDate:"2025-01-14",updatedDate:"2025-01-15"},{id:"task-4",key:"PROJ-104",title:"Update Docker container dependencies",description:"Update all container images to latest secure versions",priority:"High",status:"To Do",assignee:"Alice Chen",assigneeAvatar:"/avatars/shadcn.jpg",storyPoints:3,dueDate:"2025-01-25",sprint:"sprint-1",createdDate:"2025-01-15",updatedDate:"2025-01-16"},{id:"task-5",key:"PROJ-105",title:"Security review of authentication module",description:"Conduct security review of auth module for vulnerabilities",priority:"High",status:"In Review",assignee:"John Doe",assigneeAvatar:"/avatars/shadcn.jpg",storyPoints:8,dueDate:"2025-01-21",sprint:"sprint-1",linkedVulnerability:{id:"VULN-089",name:"Weak Password Hashing",severity:"High"},instances:[{location:"src/utils/hash.js - hashPassword()",file:"src/utils/hash.js",lineNumber:8,codeSnippet:'return crypto.createHash("md5").update(password).digest("hex")',type:"Weak Cryptography"}],type:"Manual VAPT",createdDate:"2025-01-13",updatedDate:"2025-01-17"},{id:"task-6",key:"PROJ-106",title:"Configure WAF rules",description:"Set up Web Application Firewall rules for prod environment",priority:"Medium",status:"Blocked",assignee:"Charlie Davis",assigneeAvatar:"/avatars/shadcn.jpg",storyPoints:5,dueDate:"2025-01-26",sprint:"sprint-1",createdDate:"2025-01-14",updatedDate:"2025-01-17"},{id:"task-7",key:"PROJ-107",title:"Database security hardening",description:"Implement database security best practices",priority:"Medium",status:"Done",assignee:"Diana Evans",assigneeAvatar:"/avatars/shadcn.jpg",storyPoints:8,dueDate:"2025-01-19",sprint:"sprint-1",linkedVulnerability:{id:"VULN-123",name:"Database default credentials",severity:"Critical"},instances:[{location:"infrastructure/db-setup.sql - initialization",file:"infrastructure/db-setup.sql",lineNumber:5,codeSnippet:'CREATE USER admin IDENTIFIED BY "admin"',type:"Default Credentials"}],type:"Manual VAPT",createdDate:"2025-01-10",updatedDate:"2025-01-17"},{id:"task-8",key:"PROJ-108",title:"Penetration testing on staging",description:"Conduct comprehensive penetration test on staging environment",priority:"Critical",status:"To Do",assignee:"Eve Foster",assigneeAvatar:"/avatars/shadcn.jpg",storyPoints:13,dueDate:"2025-02-05",sprint:"sprint-2",linkedVulnerability:{id:"VULN-156",name:"Multiple findings from VAPT",severity:"Critical"},instances:[{location:"API endpoint - /api/admin/users",file:"src/routes/admin.js",lineNumber:15,codeSnippet:'app.get("/api/admin/users", (req, res) => { /* no auth check */ })',type:"Missing Authentication"},{location:"Session storage - browser",file:"src/services/auth.js",lineNumber:78,codeSnippet:'localStorage.setItem("authToken", token)  // Stored in plain text',type:"Insecure Storage"}],type:"Manual VAPT",createdDate:"2025-01-15",updatedDate:"2025-01-17"},{id:"task-9",key:"PROJ-109",title:"Implement rate limiting",description:"Add rate limiting to API endpoints",priority:"High",status:"To Do",assignee:"Frank Gray",assigneeAvatar:"/avatars/shadcn.jpg",storyPoints:5,dueDate:"2025-02-08",sprint:"sprint-2",linkedVulnerability:{id:"VULN-201",name:"Brute Force Attack Vulnerability",severity:"High"},instances:[{location:"src/routes/auth.js - POST /login",file:"src/routes/auth.js",lineNumber:45,codeSnippet:'app.post("/login", validateCredentials)  // No rate limiting',type:"Brute Force"}],type:"DAST Scan",createdDate:"2025-01-15",updatedDate:"2025-01-15"}];function ke(s){const d=s.length,i=s.filter(m=>m.status==="In Progress").length,x=s.filter(m=>m.status==="Done").length,u=s.filter(m=>m.status==="Blocked").length,t=s.filter(m=>m.priority==="Critical"||m.priority==="High").length,n=s.filter(m=>m.dueDate?new Date(m.dueDate)<new Date&&m.status!=="Done":!1).length,f=d>0?Math.round(x/d*100):0;return{totalTasks:d,inProgressTasks:i,completedTasks:x,blockedTasks:u,highPriorityTasks:t,overdueTasks:n,completionRate:f}}function we(){const[s,d]=b.useState({searchTerm:""}),i=b.useMemo(()=>Array.from(new Set(y.map(t=>t.assignee).filter(Boolean))),[]),x=b.useMemo(()=>{let t=[...y];if(s.searchTerm){const n=s.searchTerm.toLowerCase();t=t.filter(f=>f.title.toLowerCase().includes(n)||f.key.toLowerCase().includes(n))}return s.status&&(t=t.filter(n=>n.status===s.status)),s.priority&&(t=t.filter(n=>n.priority===s.priority)),s.assignee&&(t=t.filter(n=>n.assignee===s.assignee)),t},[s]),u=ke(y);return e.jsxs(e.Fragment,{children:[e.jsxs(F,{fixed:!0,children:[e.jsx(E,{}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(J,{}),e.jsx(M,{}),e.jsx(O,{})]})]}),e.jsxs(U,{className:"flex flex-1 flex-col gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tasks & Projects"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage security remediation tasks and track sprint progress"})]}),e.jsx(je,{stats:u}),e.jsx(fe,{tasks:y}),e.jsx(ve,{onFiltersChange:d,assignees:i}),e.jsx(be,{sprints:Ne,tasks:y}),(s.searchTerm||s.status||s.priority||s.assignee)&&e.jsxs("div",{className:"text-sm text-muted-foreground bg-muted/30 p-3 rounded-lg",children:["Showing ",x.length," of ",y.length," tasks",s.searchTerm&&` matching "${s.searchTerm}"`]})]})]})}const _e=we;export{_e as component};
