import{W as I,r as c,j as d,M as P,d as S,u as R,a as $,b as k}from"./index-ClRrKUtC.js";import{a as M}from"./index-BSPym9zS.js";import{b as x}from"./index-DFRgZbbD.js";import{V as F}from"./confirm-dialog-BXsq-Bnn.js";var T=I();function z(e,t=[]){let n=[];function o(a,i){const r=c.createContext(i);r.displayName=a+"Context";const u=n.length;n=[...n,i];const l=f=>{const{scope:p,children:g,...m}=f,_=p?.[e]?.[u]||r,j=c.useMemo(()=>m,Object.values(m));return d.jsx(_.Provider,{value:j,children:g})};l.displayName=a+"Provider";function v(f,p){const g=p?.[e]?.[u]||r,m=c.useContext(g);if(m)return m;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[l,v]}const s=()=>{const a=n.map(i=>c.createContext(i));return function(r){const u=r?.[e]||a;return c.useMemo(()=>({[`__scope${e}`]:{...r,[e]:u}}),[r,u])}};return s.scopeName=e,[o,D(s,...t)]}function D(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=o.reduce((r,{useScope:u,scopeName:l})=>{const f=u(a)[`__scope${l}`];return{...r,...f}},{});return c.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var H=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],h=H.reduce((e,t)=>{const n=P(`Primitive.${t}`),o=c.forwardRef((s,a)=>{const{asChild:i,...r}=s,u=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(u,{...r,ref:a})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function O(){return T.useSyncExternalStore(q,()=>!0,()=>!1)}function q(){return()=>{}}var A="Avatar",[B]=z(A),[V,C]=B(A),L=c.forwardRef((e,t)=>{const{__scopeAvatar:n,...o}=e,[s,a]=c.useState("idle");return d.jsx(V,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:d.jsx(h.span,{...o,ref:t})})});L.displayName=A;var y="AvatarImage",b=c.forwardRef((e,t)=>{const{__scopeAvatar:n,src:o,onLoadingStatusChange:s=()=>{},...a}=e,i=C(y,n),r=W(o,a),u=M(l=>{s(l),i.onImageLoadingStatusChange(l)});return x(()=>{r!=="idle"&&u(r)},[r,u]),r==="loaded"?d.jsx(h.img,{...a,ref:t,src:o}):null});b.displayName=y;var E="AvatarFallback",N=c.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:o,...s}=e,a=C(E,n),[i,r]=c.useState(o===void 0);return c.useEffect(()=>{if(o!==void 0){const u=window.setTimeout(()=>r(!0),o);return()=>window.clearTimeout(u)}},[o]),i&&a.imageLoadingStatus!=="loaded"?d.jsx(h.span,{...s,ref:t}):null});N.displayName=E;function w(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function W(e,{referrerPolicy:t,crossOrigin:n}){const o=O(),s=c.useRef(null),a=o?(s.current||(s.current=new window.Image),s.current):null,[i,r]=c.useState(()=>w(a,e));return x(()=>{r(w(a,e))},[a,e]),x(()=>{const u=f=>()=>{r(f)};if(!a)return;const l=u("loaded"),v=u("error");return a.addEventListener("load",l),a.addEventListener("error",v),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",l),a.removeEventListener("error",v)}},[a,n,t]),i}var G=L,K=b,Y=N;function Z({className:e,...t}){return d.jsx(G,{"data-slot":"avatar",className:S("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function ee({className:e,...t}){return d.jsx(K,{"data-slot":"avatar-image",className:S("aspect-square size-full",e),...t})}function te({className:e,...t}){return d.jsx(Y,{"data-slot":"avatar-fallback",className:S("flex size-full items-center justify-center rounded-full bg-muted",e),...t})}function ae({open:e,onOpenChange:t}){const n=R(),{auth:o}=$(),[s,a]=c.useState(!1),i=async()=>{a(!0);try{await k.logout()}catch(r){console.error("Logout error (will continue):",r)}finally{o.reset(),n({to:"/sign-in-2",replace:!0}),a(!1)}};return d.jsx(F,{open:e,onOpenChange:t,title:"Sign out",desc:"Are you sure you want to sign out? You will need to sign in again to access your account.",confirmText:"Sign out",destructive:!0,handleConfirm:i,isLoading:s,className:"sm:max-w-sm"})}export{Z as A,ae as S,ee as a,te as b};
