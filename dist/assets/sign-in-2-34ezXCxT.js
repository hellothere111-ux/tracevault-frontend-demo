import{c as v,r as w,u as N,a as y,j as e,d as h,L as S,B as n,o as L,b as F,t as i,s as k,e as P}from"./index-D5yFZTJT.js";import{L as I}from"./logo-34kpxj4M.js";import{u as V,a as E,F as A,b as c,c as m,d,e as x,f as u}from"./form-CmEBIDr4.js";import{I as C}from"./input-D3KnjE4Z.js";import{P as M}from"./password-input-DzEgSlI9.js";import{L as T}from"./loader-circle-DnSGsH1o.js";import"./label-BYvp6hAR.js";import"./eye-rco7DweG.js";import"./eye-off-DiWCov6M.js";const _=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],B=v("log-in",_),D="/assets/TraceVault-DnWvPnw4.png",O=L({email:P({error:r=>r.input===""?"Please enter your email":void 0}),password:k().min(1,"Please enter your password").min(7,"Password must be at least 7 characters long")});function U({className:r,redirectTo:p,...f}){const[o,l]=w.useState(!1),j=N(),{auth:g}=y(),t=V({resolver:E(O),defaultValues:{email:"",password:""}});async function b(s){l(!0);try{const a=await F.login(s.email,s.password);g.setUser({accountNo:a.user.id.toString(),email:a.user.email,role:[a.user.role],exp:Date.now()+1440*60*1e3}),i.success(`Welcome back, ${a.user.first_name}!`),j({to:p||"/",replace:!0})}catch(a){i.error(a.message||"Sign in failed"),l(!1)}}return e.jsx(A,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(b),className:h("grid gap-3",r),...f,children:[e.jsx(c,{control:t.control,name:"email",render:({field:s})=>e.jsxs(m,{children:[e.jsx(d,{children:"Email"}),e.jsx(x,{children:e.jsx(C,{placeholder:"name@example.com",...s})}),e.jsx(u,{})]})}),e.jsx(c,{control:t.control,name:"password",render:({field:s})=>e.jsxs(m,{className:"relative",children:[e.jsx(d,{children:"Password"}),e.jsx(x,{children:e.jsx(M,{placeholder:"********",...s})}),e.jsx(u,{}),e.jsx(S,{to:"/forgot-password",className:"absolute end-0 -top-0.5 text-sm font-medium text-muted-foreground hover:opacity-75",children:"Forgot password?"})]})}),e.jsxs(n,{className:"mt-2",disabled:o,children:[o?e.jsx(T,{className:"animate-spin"}):e.jsx(B,{}),"Sign in"]}),e.jsxs("div",{className:"relative my-2",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),e.jsx(n,{variant:"outline",type:"button",disabled:o,className:"w-full",children:"OAuth"})]})})}function W(){return e.jsxs("div",{className:"relative container grid h-svh flex-col items-center justify-center lg:max-w-none lg:grid-cols-2 lg:px-0 dark bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[e.jsxs("div",{className:"lg:p-8 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[e.jsx("div",{className:"mx-auto flex w-full flex-col justify-center space-y-2 py-8 sm:w-[480px] sm:p-8",children:e.jsxs("div",{className:"mb-4 flex items-center justify-center",children:[e.jsx(I,{className:"me-2"}),e.jsx("h1",{className:"text-xl font-medium text-white",children:"TraceVault"})]})}),e.jsxs("div",{className:"mx-auto flex w-full max-w-sm flex-col justify-center space-y-2",children:[e.jsxs("div",{className:"flex flex-col space-y-2 text-start",children:[e.jsx("h2",{className:"text-lg font-semibold tracking-tight text-white",children:"Sign in"}),e.jsxs("p",{className:"text-sm text-slate-300",children:["Enter your email and password below ",e.jsx("br",{}),"to log into your account"]})]}),e.jsx(U,{})]})]}),e.jsx("div",{className:h("relative h-full overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 max-lg:hidden flex items-center justify-center"),children:e.jsx("img",{src:D,width:1347,height:1361,alt:"TraceVault",className:"h-80 w-80 object-contain drop-shadow-2xl"})})]})}const Y=W;export{Y as component};
